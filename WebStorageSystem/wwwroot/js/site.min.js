tippy(document.querySelectorAll(".tippy"));$(document).ready(function(){$(".selectTwo").select2({theme:"bootstrap4"});$(".selectTwoAllowClear").select2({theme:"bootstrap4",allowClear:!0})});$("#set-current-time").click(function(){$("#dt-lastCheck").val(moment().format("YYYY-MM-DDTHH:mm"))});$("#deleteRestoreModal").on("show.bs.modal",function(n){const i=$(n.relatedTarget).data("url"),u=$(n.relatedTarget).data("name"),r=i.split("/");let t=r[2];t==="Delete"||t==="Restore"||(t=r[3]);$(this).find(".modal-header h5").text(t);$(this).find(".modal-body span").text(t.toLowerCase());$(this).find(".modal-body b").text(u);$(this).find(".modal-footer .btn-danger").text(t);$(this).find(".modal-footer form").attr("action",i)});$(function(){$("#errorModal").modal("show")});$(document).ready(function(){if($("#dtDefect").length!==0)var n=[{data:"DefectNumber",searchable:!0,orderable:!0,responsivePriority:1},{data:"Unit.InventoryNumber",searchable:!0,orderable:!0,responsivePriority:4},{data:"Unit.Product.Manufacturer.Name",searchable:!0,orderable:!0,responsivePriority:10},{data:"Unit.Product.Name",searchable:!0,orderable:!0,responsivePriority:11},{data:"Unit.Product.ProductType.Name",searchable:!0,orderable:!0,responsivePriority:12},{data:"Unit.Location.Name",searchable:!0,orderable:!0,responsivePriority:20},{data:"State",searchable:!0,orderable:!0,responsivePriority:3,render:function(n){switch(n){case 1:return"Broken";case 2:return"In repair";case 3:return"Repaired";default:"Unknown"}}},{data:"Description",searchable:!0,orderable:!0},{data:"ReportedByUser.UserName",searchable:!0,orderable:!0,responsivePriority:30},{data:"CausedByUser.UserName",searchable:!0,orderable:!0,responsivePriority:31},{data:"CreatedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"ModifiedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"Action",searchable:!1,orderable:!1,responsivePriority:2,render:function(n,t,i){var r=`<a href="${i.Action.Edit}" class="text-primary">Edit</a> `;return r=r+`<a href="${i.Action.Details}" class="text-primary">Details</a> `,i.IsDeleted?r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Restore}" data-name="${i.Name}">Restore</a>`:r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Delete}" data-name="${i.Name}">Delete</a>`}}],t=$("#dtDefect").DataTable({paging:!1,processing:!0,serverSide:!0,ajax:{url:"Defect/LoadTable",type:"POST"},layout:{topEnd:null},responsive:!0,columns:n,initComplete:function(){$("#dtDefect thead tr").after("<tr>");this.api().columns().every(function(){var t=this,i=t.index(),o=n[i].searchable,s=t.responsiveHidden(),r=n[i].data,u=t.header().textContent,f,e;if(o&&s&&i!==6)if(r.includes("IsDeleted")){$("#dtDefect thead tr:last").append(`<th><div class="form-check"><input class="form-check-input" type="checkbox" id="searchCheckbox"></div></th>`);$("#dtDefect thead tr:last th:last input").on("click",function(){t.search(this.checked).draw()})}else if(r.includes("Date")){$("#dtDefect thead tr:last").append(`<th><input type="datetime-local" id="searchDate" placeholder="Search ${u}" /></th>`);$("#dtDefect thead tr:last th:last input").on("change",function(){t.search(luxon.DateTime.fromISO(this.value).toUTC().toString()).draw()})}else{$("#dtDefect thead tr:last").append(`<th><input type="search" placeholder="Search ${u}" /></th>`);$("#dtDefect thead tr:last th:last input").on("keyup change clear",function(){t.search()!==this.value&&t.search(this.value).draw()})}i===6&&(f=$('<select><option value="">Show all<\/option><\/select>').appendTo($(`#dtDefect thead tr:last`)).on("change",function(){t.search($(this).val(),{exact:!0}).draw()}),e=["Broken","In repair","Repaired"],t.data().unique().sort().each(function(n){f.append('<option value="'+n+'">'+e[n]+"<\/option>")}))})}})});$(document).ready(function(){if($("#dtLocationType").length!==0){var n=[{data:"Name",searchable:!0,orderable:!0,responsivePriority:1},{data:"Description",searchable:!0,orderable:!0,responsivePriority:3},{data:"CreatedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"ModifiedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"IsDeleted",searchable:!0,orderable:!0,render:function(n,t,i){var r="";return i.IsDeleted===!0&&(r="checked"),`<div class="form-check"><input class="form-check-input" type="checkbox" disabled ${r}></div>`}},{data:"Action",searchable:!1,orderable:!1,responsivePriority:2,render:function(n,t,i){var r=`<a href="${i.Action.Edit}" class="text-primary">Edit</a> `;return r=r+`<a href="${i.Action.Details}" class="text-primary">Details</a> `,i.IsDeleted?r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Restore}" data-name="${i.Name}">Restore</a>`:r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Delete}" data-name="${i.Name}">Delete</a>`}}],t=$("#dtLocationType").DataTable({paging:!1,processing:!0,serverSide:!0,ajax:{url:"LocationType/LoadTable",type:"POST",data:{}},layout:{topEnd:null},responsive:!0,columns:n,initComplete:function(){$("#dtLocationType thead tr").after("<tr>");this.api().columns().every(function(){var t=this,i=t.index(),r=n[i].searchable,u=t.responsiveHidden(),f=n[i].data,e=t.header().textContent;if(r&&u)if(f.includes("IsDeleted")){$("#dtLocationType thead tr:last").append(`<th><div class="form-check"><input class="form-check-input" type="checkbox" id="searchCheckbox"></div></th>`);$("#dtLocationType thead tr:last th:last input").on("click",function(){t.search(this.checked).draw()})}else if(f.includes("Date")){$("#dtLocationType thead tr:last").append(`<th><input type="datetime-local" id="searchDate" placeholder="Search ${e}" /></th>`);$("#dtLocationType thead tr:last th:last input").on("change",function(){t.search(luxon.DateTime.fromISO(this.value).toUTC().toString()).draw()})}else{$("#dtLocationType thead tr:last").append(`<th><input type="search" placeholder="Search ${e}" /></th>`);$("#dtLocationType thead tr:last th:last input").on("keyup clear",function(){t.search()!==this.value&&t.search(this.value).draw()})}!r&&u&&$("#dtLocationType thead tr:last").append(`<th></th>`)})}});t.columns(4).search("false").draw()}});$(document).ready(function(){if($("#dtLocation").length!==0){var n=[{data:"Name",searchable:!0,orderable:!0,responsivePriority:1},{data:"Description",searchable:!0,orderable:!0,responsivePriority:5},{data:"Address",searchable:!0,orderable:!0,responsivePriority:4},{data:"LocationType.Name",searchable:!0,orderable:!0,responsivePriority:3},{data:"CreatedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"ModifiedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"IsDeleted",searchable:!0,orderable:!0,render:function(n,t,i){var r="";return i.IsDeleted===!0&&(r="checked"),`<div class="form-check"><input class="form-check-input" type="checkbox" disabled ${r}></div>`}},{data:"Action",searchable:!1,orderable:!1,responsivePriority:2,render:function(n,t,i){var r=`<a href="${i.Action.Edit}" class="text-primary">Edit</a> `;return r=r+`<a href="${i.Action.Details}" class="text-primary">Details</a> `,i.IsDeleted?r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Restore}" data-name="${i.Name}">Restore</a>`:r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Delete}" data-name="${i.Name}">Delete</a>`}}],t=$("#dtLocation").DataTable({paging:!1,processing:!0,serverSide:!0,ajax:{url:"Location/LoadTable",type:"POST"},layout:{topEnd:null},responsive:!0,columns:n,initComplete:function(){$("#dtLocation thead tr").after("<tr>");this.api().columns().every(function(){var t=this,i=t.index(),r=n[i].searchable,u=t.responsiveHidden(),f=n[i].data,e=t.header().textContent;if(r&&u)if(f.includes("IsDeleted")){$("#dtLocation thead tr:last").append(`<th><div class="form-check"><input class="form-check-input" type="checkbox" id="searchCheckbox"></div></th>`);$("#dtLocation thead tr:last th:last input").on("click",function(){t.search(this.checked).draw()})}else if(f.includes("Date")){$("#dtLocation thead tr:last").append(`<th><input type="datetime-local" id="searchDate" placeholder="Search ${e}" /></th>`);$("#dtLocation thead tr:last th:last input").on("change",function(){t.search(luxon.DateTime.fromISO(this.value).toUTC().toString()).draw()})}else{$("#dtLocation thead tr:last").append(`<th><input type="search" placeholder="Search ${e}" /></th>`);$("#dtLocation thead tr:last th:last input").on("keyup change clear",function(){t.search()!==this.value&&t.search(this.value).draw()})}!r&&u&&$("#dtLocation thead tr:last").append(`<th></th>`)})}});t.columns(6).search("false").draw()}});$(document).ready(function(){if($("#dtManufacturer").length!==0){var n=[{data:"Name",searchable:!0,orderable:!0,responsivePriority:1},{data:"Description",searchable:!0,orderable:!0,responsivePriority:3},{data:"CreatedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"ModifiedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"IsDeleted",searchable:!0,orderable:!0,render:function(n,t,i){var r="";return i.IsDeleted===!0&&(r="checked"),`<div class="form-check"><input class="form-check-input" type="checkbox" disabled ${r}></div>`}},{data:"Action",searchable:!1,orderable:!1,responsivePriority:2,render:function(n,t,i){var r=`<a href="${i.Action.Edit}" class="text-primary">Edit</a> `;return r=r+`<a href="${i.Action.Details}" class="text-primary">Details</a> `,i.IsDeleted?r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Restore}" data-name="${i.Name}">Restore</a>`:r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Delete}" data-name="${i.Name}">Delete</a>`}}],t=$("#dtManufacturer").DataTable({paging:!1,processing:!0,serverSide:!0,ajax:{url:"Manufacturer/LoadTable",type:"POST"},layout:{topEnd:null},responsive:!0,columns:n,initComplete:function(){$("#dtManufacturer thead tr").after("<tr>");this.api().columns().every(function(){var t=this,i=t.index(),r=n[i].searchable,u=t.responsiveHidden(),f=n[i].data,e=t.header().textContent;if(r&&u)if(f.includes("IsDeleted")){$("#dtManufacturer thead tr:last").append(`<th><div class="form-check"><input class="form-check-input" type="checkbox" id="searchCheckbox"></div></th>`);$("#dtManufacturer thead tr:last th:last input").on("click",function(){t.search(this.checked).draw()})}else if(f.includes("Date")){$("#dtManufacturer thead tr:last").append(`<th><input type="datetime-local" id="searchDate" placeholder="Search ${e}" /></th>`);$("#dtManufacturer thead tr:last th:last input").on("change",function(){t.search(luxon.DateTime.fromISO(this.value).toUTC().toString()).draw()})}else{$("#dtManufacturer thead tr:last").append(`<th><input type="search" placeholder="Search ${e}" /></th>`);$("#dtManufacturer thead tr:last th:last input").on("keyup change clear",function(){t.search()!==this.value&&t.search(this.value).draw()})}!r&&u&&$("#dtManufacturer thead tr:last").append(`<th></th>`)})}});t.columns(4).search("false").draw()}});$(document).ready(function(){if($("#dtProductType").length!==0)var n=[{data:"Name",searchable:!0,orderable:!0,responsivePriority:1},{data:"Description",searchable:!0,orderable:!0,responsivePriority:3},{data:"CreatedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"ModifiedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"IsDeleted",searchable:!0,orderable:!0,render:function(n,t,i){var r="";return i.IsDeleted===!0&&(r="checked"),`<div class="form-check"><input class="form-check-input" type="checkbox" disabled ${r}></div>`}},{data:"Action",searchable:!1,orderable:!1,responsivePriority:2,render:function(n,t,i){var r=`<a href="${i.Action.Edit}" class="text-primary">Edit</a> `;return r=r+`<a href="${i.Action.Details}" class="text-primary">Details</a> `,i.IsDeleted?r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Restore}" data-name="${i.Name}">Restore</a>`:r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Delete}" data-name="${i.Name}">Delete</a>`}}],t=$("#dtProductType").DataTable({paging:!1,processing:!0,serverSide:!0,ajax:{url:"ProductType/LoadTable",type:"POST"},layout:{topEnd:null},responsive:!0,columns:n,initComplete:function(){$("#dtProductType thead tr").after("<tr>");this.api().columns().every(function(){var t=this,i=t.index(),r=n[i].searchable,u=t.responsiveHidden(),f=n[i].data,e=t.header().textContent;if(r&&u)if(f.includes("IsDeleted")){$("#dtProductType thead tr:last").append(`<th><div class="form-check"><input class="form-check-input" type="checkbox" id="searchCheckbox"></div></th>`);$("#dtProductType thead tr:last th:last input").on("click",function(){t.search(this.checked).draw()})}else if(f.includes("Date")){$("#dtProductType thead tr:last").append(`<th><input type="datetime-local" id="searchDate" placeholder="Search ${e}" /></th>`);$("#dtProductType thead tr:last th:last input").on("change",function(){t.search(luxon.DateTime.fromISO(this.value).toUTC().toString()).draw()})}else{$("#dtProductType thead tr:last").append(`<th><input type="search" placeholder="Search ${e}" /></th>`);$("#dtProductType thead tr:last th:last input").on("keyup change clear",function(){t.search()!==this.value&&t.search(this.value).draw()})}!r&&u&&$("#dtProductType thead tr:last").append(`<th></th>`)});t.columns(4).search("false").draw()}})});$(document).ready(function(){if($("#dtVendor").length!==0){var n=[{data:"Name",searchable:!0,orderable:!0,responsivePriority:1},{data:"Address",searchable:!0,orderable:!0},{data:"Phone",searchable:!0,orderable:!0,responsivePriority:4},{data:"Email",searchable:!0,orderable:!0,responsivePriority:3},{data:"Website",searchable:!0,orderable:!0},{data:"CreatedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"ModifiedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"IsDeleted",searchable:!0,orderable:!0,render:function(n,t,i){var r="";return i.IsDeleted===!0&&(r="checked"),`<div class="form-check"><input class="form-check-input" type="checkbox" disabled ${r}></div>`}},{data:"Action",searchable:!1,orderable:!1,responsivePriority:2,render:function(n,t,i){var r=`<a href="${i.Action.Edit}" class="text-primary">Edit</a> `;return r=r+`<a href="${i.Action.Details}" class="text-primary">Details</a> `,i.IsDeleted?r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Restore}" data-name="${i.Name}">Restore</a>`:r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Delete}" data-name="${i.Name}">Delete</a>`}}],t=$("#dtVendor").DataTable({paging:!1,processing:!0,serverSide:!0,ajax:{url:"Vendor/LoadTable",type:"POST"},layout:{topEnd:null},responsive:!0,columns:n,initComplete:function(){$("#dtVendor thead tr").after("<tr>");this.api().columns().every(function(){var t=this,i=t.index(),r=n[i].searchable,u=t.responsiveHidden(),f=n[i].data,e=t.header().textContent;if(r&&u)if(f.includes("IsDeleted")){$("#dtVendor thead tr:last").append(`<th><div class="form-check"><input class="form-check-input" type="checkbox" id="searchCheckbox"></div></th>`);$("#dtVendor thead tr:last th:last input").on("click",function(){t.search(this.checked).draw()})}else if(f.includes("Date")){$("#dtVendor thead tr:last").append(`<th><input type="datetime-local" id="searchDate" placeholder="Search ${e}" /></th>`);$("#dtVendor thead tr:last th:last input").on("change",function(){t.search(luxon.DateTime.fromISO(this.value).toUTC().toString()).draw()})}else{$("#dtVendor thead tr:last").append(`<th><input type="search" placeholder="Search ${e}" /></th>`);$("#dtVendor thead tr:last th:last input").on("keyup change clear",function(){t.search()!==this.value&&t.search(this.value).draw()})}!r&&u&&$("#dtVendor thead tr:last").append(`<th></th>`)})}});t.columns(7).search("false").draw()}});$(document).ready(function(){if($("#dtProduct").length!==0){var n=[{data:"Name",searchable:!0,orderable:!0,responsivePriority:1},{data:"ProductNumber",searchable:!0,orderable:!0,responsivePriority:3},{data:"Description",searchable:!0,orderable:!0},{data:"Webpage",searchable:!0,orderable:!0},{data:"ProductType.Name",searchable:!0,orderable:!0,responsivePriority:4},{data:"Manufacturer.Name",searchable:!0,orderable:!0,responsivePriority:5},{data:"CreatedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"ModifiedDate",searchable:!0,orderable:!0,render:function(n){return luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"IsDeleted",searchable:!0,orderable:!0,render:function(n,t,i){var r="";return i.IsDeleted===!0&&(r="checked"),`<div class="form-check"><input class="form-check-input" type="checkbox" disabled ${r}></div>`}},{data:"Action",searchable:!1,orderable:!1,responsivePriority:2,render:function(n,t,i){var r=`<a href="${i.Action.Edit}" class="text-primary">Edit</a> `;return r=r+`<a href="${i.Action.Details}" class="text-primary">Details</a> `,i.IsDeleted?r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Restore}" data-name="${i.Name}">Restore</a>`:r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Delete}" data-name="${i.Name}">Delete</a>`}}],t=$("#dtProduct").DataTable({paging:!1,processing:!0,serverSide:!0,ajax:{url:"Product/LoadTable",type:"POST"},layout:{topEnd:null},responsive:!0,columns:n,initComplete:function(){$("#dtProduct thead tr").after("<tr>");this.api().columns().every(function(){var t=this,i=t.index(),r=n[i].searchable,u=t.responsiveHidden(),f=n[i].data,e=t.header().textContent;if(r&&u)if(f.includes("IsDeleted")){$("#dtProduct thead tr:last").append(`<th><div class="form-check"><input class="form-check-input" type="checkbox" id="searchCheckbox"></div></th>`);$("#dtProduct thead tr:last th:last input").on("click",function(){t.search(this.checked).draw()})}else if(f.includes("Date")){$("#dtProduct thead tr:last").append(`<th><input type="datetime-local" id="searchDate" placeholder="Search ${e}" /></th>`);$("#dtProduct thead tr:last th:last input").on("change",function(){t.search(luxon.DateTime.fromISO(this.value).toUTC().toString()).draw()})}else{$("#dtProduct thead tr:last").append(`<th><input type="search" placeholder="Search ${e}" /></th>`);$("#dtProduct thead tr:last th:last input").on("keyup change clear",function(){t.search()!==this.value&&t.search(this.value).draw()})}!r&&u&&$("#dtProduct thead tr:last").append(`<th></th>`)})}});t.columns(8).search("false").draw()}});$(document).ready(function(){if($("#dtBundle").length!==0){var n=[{data:"Name",searchable:!0,orderable:!0,responsivePriority:4},{data:"InventoryNumber",searchable:!0,orderable:!0,responsivePriority:1},{data:"Location.Name",searchable:!0,orderable:!0},{data:"DefaultLocation.Name",searchable:!0,orderable:!0},{data:"NumberOfUnits",searchable:!1,orderable:!1},{data:"BundledUnits",searchable:!0,orderable:!1,responsivePriority:3,render:function(n){var t="";for(const i in n)t=t+`${n[i].InventoryNumber} (${n[i].Product.ProductType.Name} - ${n[i].Product.Name})  <br />`;return t}},{data:"HasDefect",searchable:!0,orderable:!0,render:function(n,t,i){var r="";return i.HasDefect===!0&&(r="checked"),`<div class="form-check"><input class="form-check-input" type="checkbox" disabled ${r}></div>`}},{data:"IsDeleted",searchable:!0,orderable:!0,render:function(n,t,i){var r="";return i.IsDeleted===!0&&(r="checked"),`<div class="form-check"><input class="form-check-input" type="checkbox" disabled ${r}></div>`}},{data:"Action",searchable:!1,orderable:!1,responsivePriority:2,render:function(n,t,i){var r=`<a href="${i.Action.Edit}" class="text-primary">Edit</a> `;return r=r+`<a href="${i.Action.Details}" class="text-primary">Details</a> `,i.IsDeleted?r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Restore}" data-name="${i.Name}">Restore</a>`:r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Delete}" data-name="${i.Name}">Delete</a>`}}],t=$("#dtBundle").DataTable({paging:!1,processing:!0,serverSide:!0,ajax:{url:"Bundle/LoadTable",type:"POST"},layout:{topEnd:null},responsive:!0,columns:n,initComplete:function(){$("#dtBundle thead tr").after("<tr>");this.api().columns().every(function(){var t=this,i=t.index(),r=n[i].searchable,u=t.responsiveHidden(),f=n[i].data,e=t.header().textContent;if(r&&u)if(f.includes("IsDeleted")){$("#dtBundle thead tr:last").append(`<th><div class="form-check"><input class="form-check-input" type="checkbox" id="searchCheckbox"></div></th>`);$("#dtBundle thead tr:last th:last input").on("click",function(){t.search(this.checked).draw()})}else if(f.includes("Date")){$("#dtBundle thead tr:last").append(`<th><input type="datetime-local" id="searchDate" placeholder="Search ${e}" /></th>`);$("#dtBundle thead tr:last th:last input").on("change",function(){t.search(luxon.DateTime.fromISO(this.value).toUTC().toString()).draw()})}else{$("#dtBundle thead tr:last").append(`<th><input type="search" placeholder="Search ${e}" /></th>`);$("#dtBundle thead tr:last th:last input").on("keyup change clear",function(){t.search()!==this.value&&t.search(this.value).draw()})}!r&&u&&$("#dtBundle thead tr:last").append(`<th></th>`)})}});t.columns(7).search("false").draw()}});$(document).ready(function(){if($("#dtUnit").length!==0){var n=[{data:"InventoryNumber",searchable:!0,orderable:!0,responsivePriority:1},{data:"Product.ProductType.Name",searchable:!0,orderable:!0,responsivePriority:6},{data:"Product.Manufacturer.Name",searchable:!0,orderable:!0,responsivePriority:5},{data:"Product.Name",searchable:!0,orderable:!0,responsivePriority:4},{data:"SerialNumber",searchable:!0,orderable:!0,responsivePriority:3},{data:"Location.Name",searchable:!0,orderable:!0},{data:"DefaultLocation.Name",searchable:!0,orderable:!0},{data:"ShelfNumber",searchable:!0,orderable:!0},{data:"PartOfBundle.Name",searchable:!0,orderable:!0,defaultContent:"",responsivePriority:7},{data:"Notes",searchable:!0,orderable:!0},{data:"Vendor.Name",searchable:!0,orderable:!0,defaultContent:""},{data:"LastTransferTime",searchable:!0,orderable:!0,render:function(n){return n?luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT"):null}},{data:"LastCheckTime",searchable:!0,orderable:!0,render:function(n){return n?luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT"):null}},{data:"HasDefect",searchable:!0,orderable:!0,render:function(n,t,i){var r="";return i.HasDefect===!0&&(r="checked"),`<div class="form-check"><input class="form-check-input" type="checkbox" disabled ${r}></div>`}},{data:"IsDeleted",searchable:!0,orderable:!0,render:function(n,t,i){var r="";return i.IsDeleted===!0&&(r="checked"),`<div class="form-check"><input class="form-check-input" type="checkbox" disabled ${r}></div>`}},{data:"Action",searchable:!1,orderable:!1,responsivePriority:2,render:function(n,t,i){var r=`<a href="${i.Action.Edit}" class="text-primary">Edit</a> `;return r=r+`<a href="${i.Action.Details}" class="text-primary">Details</a> `,i.IsDeleted?r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Restore}" data-name="${i.Name}">Restore</a>`:r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Delete}" data-name="${i.Name}">Delete</a>`}}],t=$("#dtUnit").DataTable({paging:!1,processing:!0,serverSide:!0,ajax:{url:"Unit/LoadTable",type:"POST"},layout:{topEnd:null},responsive:!0,columns:n,initComplete:function(){$("#dtUnit thead tr").after("<tr>");this.api().columns().every(function(){var t=this,i=t.index(),r=n[i].searchable,u=t.responsiveHidden(),f=n[i].data,e=t.header().textContent;if(r&&u)if(f.includes("IsDeleted")){$("#dtUnit thead tr:last").append(`<th><div class="form-check"><input class="form-check-input" type="checkbox" id="searchCheckbox"></div></th>`);$("#dtUnit thead tr:last th:last input").on("click",function(){t.search(this.checked).draw()})}else if(f.includes("Date")){$("#dtUnit thead tr:last").append(`<th><input type="datetime-local" id="searchDate" placeholder="Search ${e}" /></th>`);$("#dtUnit thead tr:last th:last input").on("change",function(){t.search(luxon.DateTime.fromISO(this.value).toUTC().toString()).draw()})}else{$("#dtUnit thead tr:last").append(`<th><input type="search" placeholder="Search ${e}" /></th>`);$("#dtUnit thead tr:last th:last input").on("keyup change clear",function(){t.search()!==this.value&&t.search(this.value).draw()})}!r&&u&&$("#dtUnit thead tr:last").append(`<th></th>`)})}});t.columns(14).search("false").draw()}});$(document).ready(function(){if($("#dtTransfer").length!==0)var n=[{data:"MainTransfer.TransferNumber",searchable:!0,orderable:!0,responsivePriority:1},{data:"MainTransfer.TransferTime",searchable:!0,orderable:!0,responsivePriority:11,render:function(n,t,i){return i.MainTransfer.State==1?"Not Yet Transfered":luxon.DateTime.fromISO(n,{zone:"utc"}).toLocal().toFormat("dd.LL.yyyy TT")}},{data:"MainTransfer.State",searchable:!0,orderable:!0,responsivePriority:10,render:function(n){switch(n){case 1:return"Prepared";case 2:return"Transferred";default:return"Unknown"}}},{data:"MainTransfer.User.UserName",searchable:!0,orderable:!0,responsivePriority:20,render:function(n){const t=n.split("@");return t[0]}},{data:"OriginLocation.Name",searchable:!0,orderable:!0,responsivePriority:3},{data:"DestinationLocation.Name",searchable:!0,orderable:!0,responsivePriority:4},{data:"UnitBundleView.InventoryNumber",searchable:!0,orderable:!1,responsivePriority:5,defaultContent:"",render:function(n,t,i){return i.BundleId==null?i.Unit.InventoryNumber:i.Bundle.InventoryNumber}},{data:"Action",searchable:!1,orderable:!1,responsivePriority:2,render:function(n,t,i){var r="";return i.Action.Transfer!=null&&(r=`<a href="${i.Action.Transfer}" class="text-primary">Transfer</a> `),r+`<a href="${i.Action.Details}" class="text-primary">Details</a>`}}],t=$("#dtTransfer").DataTable({paging:!1,processing:!0,serverSide:!0,ajax:{url:"Transfer/LoadTable",type:"POST"},layout:{topEnd:null},responsive:!0,columns:n,initComplete:function(){$("#dtTransfer thead tr").after("<tr>");this.api().columns().every(function(){var t=this,i=t.index(),o=n[i].searchable,s=t.responsiveHidden(),r=n[i].data,u=t.header().textContent,f,e;if(o&&s&&i!==2)if(r.includes("IsDeleted")){$("#dtTransfer thead tr:last").append(`<th><div class="form-check"><input class="form-check-input" type="checkbox" id="searchCheckbox"></div></th>`);$("#dtTransfer thead tr:last th:last input").on("click",function(){t.search(this.checked).draw()})}else if(r.includes("Date")){$("#dtTransfer thead tr:last").append(`<th><input type="datetime-local" id="searchDate" placeholder="Search ${u}" /></th>`);$("#dtTransfer thead tr:last th:last input").on("change",function(){t.search(luxon.DateTime.fromISO(this.value).toUTC().toString()).draw()})}else{$("#dtTransfer thead tr:last").append(`<th><input type="search" placeholder="Search ${u}" /></th>`);$("#dtTransfer thead tr:last th:last input").on("keyup change clear",function(){t.search()!==this.value&&t.search(this.value).draw()})}i===2&&(f=$('<select><option value="">Select all<\/option><\/select>').appendTo($(`#dtTransfer thead tr:last`)).on("change",function(){t.search($(this).val(),{exact:!0}).draw()}),e=["Prepared","Transferred"],t.data().unique().sort().each(function(n){f.append('<option value="'+n+'">'+e[n-1]+"<\/option>")}))})}})});$(document).ready(function(){if($("#dtTransferDetails").length!==0)var n=[{data:"UnitBundleView.InventoryNumber",searchable:!0,orderable:!1,render:function(n,t,i){return i.BundleId==null?i.Unit.InventoryNumber:i.Bundle.InventoryNumber}},{data:"OriginLocation.Name",searchable:!0,orderable:!0}],t=$("#dtTransferDetails").DataTable({paging:!1,processing:!0,serverSide:!0,ajax:{url:"/Transfer/LoadTableDetails",type:"POST",data:{AdditionalData:{MainTransferId:$("#MainTransferId").val()}}},layout:{topEnd:null},initComplete:function(){$("#dtTransferDetails thead tr").after("<tr>");var i=0;$("#dtTransferDetails thead th").each(function(){var t=$("#dtTransferDetails thead th").eq($(this).index()).text();n[i].searchable&&t!="Transfer State"?n[i].data.includes("IsDeleted")?$("#dtTransferDetails thead tr:last").append(`<th><div class="form-check"><input class="form-check-input" type="checkbox"></div></th>`):n[i].data.includes("Date")?$("#dtTransferDetails thead tr:last").append(`<th><input type="datetime-local" id="searchDate" placeholder="Search ${t}" /></th>`):$("#dtTransferDetails thead tr:last").append(`<th><input type="search" placeholder="Search ${t}" /></th>`):$("#dtTransferDetails thead tr:last").append(`<th></th>`);i++});$("#dtTransfer thead th:last").after("<\/tr>");t.columns().every(function(n){var i=this,t=$(`#dtTransferDetails thead tr:last th:eq(${n}) input`);if(t.is("#searchCheckbox"))t.on("click",function(){i.search(this.checked).draw()});else if(t.is("#searchDate"))t.on("change",function(){i.search(luxon.DateTime.fromISO(this.value).toUTC().toString()).draw()});else t.on("keyup clear",function(){i.search(this.value).draw()})})},columns:n})});$(document).ready(function(){var n,i,t;if($("#dtCreateTransfer").length!==0){n=[{data:"InventoryNumber",searchable:!0,orderable:!0},{data:"Unit.Product.Name",searchable:!0,orderable:!0},{data:"Bundle.BundledUnits",searchable:!0,orderable:!1,render:function(n){var t="";for(const i in n)t=t+`${n[i].InventoryNumber} (${n[i].Product.ProductType.Name} - ${n[i].Product.Name})  <br />`;return t}},{data:"Location.Name",searchable:!0,orderable:!0},{data:"DefaultLocation.Name",searchable:!0,orderable:!0},{data:"HasDefect",searchable:!0,orderable:!0,render:function(n,t,i){var r="";return i.HasDefect===!0&&(r="checked"),`<div class="form-check"><input class="form-check-input" type="checkbox" disabled ${r}></div>`}},];i=$("#dtCreateTransfer").DataTable({paging:!1,processing:!0,serverSide:!0,ajax:{url:"/Transfer/LoadUnitBundleView",type:"POST"},layout:{topEnd:null},columns:n});$("#dtCreateTransfer thead tr").after("<tr>");t=0;$("#dtCreateTransfer thead th").each(function(){var i=$("#dtCreateTransfer thead th").eq($(this).index()).text();n[t].searchable?n[t].data.includes("IsDeleted")||n[t].data.includes("HasDefect")?$("#dtCreateTransfer thead tr:last").append(`<th><div class="form-check"><input class="form-check-input" type="checkbox"></div></th>`):n[t].data.includes("Date")?$("#dtCreateTransfer thead tr:last").append(`<th><input type="datetime-local" id="searchDate" placeholder="Search ${i}" /></th>`):$("#dtCreateTransfer thead tr:last").append(`<th><input type="search" placeholder="Search ${i}" /></th>`):$("#dtCreateTransfer thead tr:last").append(`<th></th>`);t++});$("#dtCreateTransfer thead th:last").after("<\/tr>");i.columns().every(function(n){var i=this,t=$(`#dtCreateTransfer thead tr:last th:eq(${n}) input`);if(t.is("#searchCheckbox"))t.on("click",function(){i.search(this.checked).draw()});else if(t.is("#searchDate"))t.on("change",function(){i.search(luxon.DateTime.fromISO(this.value).toUTC().toString()).draw()});else t.on("keyup clear",function(){i.search(this.value).draw()})});$("#dtCreateTransfer tbody").on("click","tr",function(){$(this).toggleClass("selected")});$('input[name="btnCreateTransfer"]').click(function(){var n=i.rows(".selected").data(),t=[];for(let i=0;i<n.length;++i){const r=n[i];t.push(r)}$("#selectedRows").val(JSON.stringify(t))})}});