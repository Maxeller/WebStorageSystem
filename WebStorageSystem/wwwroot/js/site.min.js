tippy(document.querySelectorAll(".tippy"));$(document).ready(function(){$(".selectTwo").select2({theme:"bootstrap4"});$(".selectTwoAllowClear").select2({theme:"bootstrap4",allowClear:!0})});$("#deleteRestoreModal").on("show.bs.modal",function(n){const i=$(n.relatedTarget).data("url"),u=$(n.relatedTarget).data("name"),r=i.split("/");let t=r[2];t==="Delete"||t==="Restore"||(t=r[3]);$(this).find(".modal-header h5").text(t);$(this).find(".modal-body span").text(t.toLowerCase());$(this).find(".modal-body b").text(u);$(this).find(".modal-footer .btn-danger").text(t);$(this).find(".modal-footer form").attr("action",i)});$(function(){$("#errorModal").modal("show")});$(()=>{if($("#dtLocationType").length!==0){var n=$("#dtLocationType").DataTable({language:{processing:"Loading Data...",zeroRecords:"No matching records found"},processing:!0,serverSide:!0,orderCellsTop:!0,autoWidth:!0,deferRender:!0,paging:!1,dom:'<"row"<"col-sm-12 col-md-6"B><"col-sm-12 col-md-6 text-right"l>><"row"<"col-sm-12"tr>><"row"<"col-sm-12 col-md-5"i><"col-sm-12 col-md-7"p>>',buttons:[{text:"Export to Excel",className:"btn btn-sm btn-dark",action:function(){window.location.href="/Home/GetExcel"},init:function(n,t){$(t).removeClass("dt-button")}},{text:"createText",className:"btn btn-sm btn-success",action:function(){$("#createModal").modal("show")},init:function(n,t){$(t).removeClass("dt-button")}}],ajax:{type:"POST",url:"LocationType/LoadTable",contentType:"application/json; charset=utf-8","async":!0,headers:{"XSRF-TOKEN":document.querySelector('[name="__RequestVerificationToken"]').value},data:function(n){return JSON.stringify(n)}},columns:[{data:"Name",name:"co"},{data:"Description",name:"co"},{data:"CreatedDate",render:function(n){return n?moment(n).local().format("DD.MM.YYYY HH:mm:ss"):null},name:"gte"},{data:"ModifiedDate",render:function(n){return n?moment(n).local().format("DD.MM.YYYY HH:mm:ss"):null},name:"gte"},{data:"IsDeleted",render:function(n){return n?"Yes":"No"}},{data:"Action",orderable:!1,render:function(n,t,i){let r=`<a href="${i.Action.Edit}" class="text-primary">Edit</a> | `;return r=r+`<a href="${i.Action.Details}" class="text-primary">Details</a> | `,i.IsDeleted?r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Restore}" data-name="${i.Name}">Restore</a>`:r+`<a href="#" class="text-primary" data-toggle="modal" data-target="#deleteRestoreModal" data-url="${i.Action.Delete}" data-name="${i.Name}">Delete</a>`}}]});n.columns().every(function(t){$("#dtLocationType thead tr:last th:eq("+t+") input").on("keyup",function(t){t.keyCode===13&&n.column($(this).parent().index()+":visible").search(this.value).draw()})});$(document).off("click","#btnCreate").on("click","#btnCreate",function(){fetch("/Home/Create/",{method:"POST",cache:"no-cache",body:new URLSearchParams(new FormData(document.querySelector("#frmCreate")))}).then(()=>{n.ajax.reload(),$("#createModal").modal("hide"),document.querySelector("#frmCreate").reset()}).catch(n=>{console.log(n)})});$(document).off("click",".btnEdit").on("click",".btnEdit",function(){const n=$(this).attr("data-key");fetch(`/Home/Edit/${n}`,{method:"GET",cache:"no-cache"}).then(n=>n.text()).then(n=>{$("#editPartial").html(n),$("#editModal").modal("show")}).catch(n=>{console.log(n)})});$(document).off("click","#btnUpdate").on("click","#btnUpdate",function(){fetch("/Home/Edit/",{method:"PUT",cache:"no-cache",body:new URLSearchParams(new FormData(document.querySelector("#frmEdit")))}).then(()=>{n.ajax.reload(),$("#editModal").modal("hide"),$("#editPartial").html("")}).catch(n=>{console.log(n)})});$(document).off("click",".btnDelete").on("click",".btnDelete",function(){const t=$(this).attr("data-key");confirm("Are you sure?")&&fetch(`/Home/Delete/${t}`,{method:"DELETE",cache:"no-cache"}).then(()=>{n.ajax.reload()}).catch(n=>{console.log(n)})});$("#btnExternalSearch").click(function(){n.column("0:visible").search($("#txtExternalSearch").val()).draw()})}});